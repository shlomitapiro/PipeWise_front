<Window x:Class="PipeWiseClient.Windows.CalculateTotalDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="סכום משדות מרובים" Height="420" Width="480"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        Background="#FAFAFA" FlowDirection="RightToLeft">

  <Window.Resources>
    <Style x:Key="ModernButton" TargetType="Button">
      <Setter Property="Background" Value="#3498DB"/>
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Height" Value="35"/>
      <Setter Property="FontSize" Value="12"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}" 
                    CornerRadius="5" 
                    Padding="{TemplateBinding Padding}">
              <ContentPresenter HorizontalAlignment="Center" 
                                VerticalAlignment="Center"/>
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#2980B9"/>
              </Trigger>
              <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Background" Value="#BDC3C7"/>
                <Setter Property="Cursor" Value="Arrow"/>
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style x:Key="CancelButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
      <Setter Property="Background" Value="#95A5A6"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}" 
                    CornerRadius="5" 
                    Padding="{TemplateBinding Padding}">
              <ContentPresenter HorizontalAlignment="Center" 
                                VerticalAlignment="Center"/>
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#7F8C8D"/>
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Window.Resources>

  <Grid Margin="20">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- כותרת -->
    <TextBlock Grid.Row="0" 
               Text="בחר שדות לחישוב סכום משותף"
               FontSize="16" FontWeight="SemiBold"
               Margin="0,0,0,10"/>

    <!-- הסבר -->
    <TextBlock Grid.Row="1"
               Text="בחר שניים או יותר שדות מספריים. הערכים שלהם יסוכמו באותה שורה ויופיעו בשדה חדש."
               Foreground="#555" FontSize="11"
               TextWrapping="Wrap"
               Margin="0,0,0,15"/>

    <!-- רשימת שדות -->
    <Border Grid.Row="2" 
            BorderBrush="#E1E5E9" BorderThickness="1"
            CornerRadius="5" Padding="10"
            Background="White">
      <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="180">
        <StackPanel x:Name="FieldsPanel"/>
      </ScrollViewer>
    </Border>

    <!-- שם השדה החדש -->
    <StackPanel Grid.Row="3" Orientation="Horizontal" 
                Margin="0,15,0,0" VerticalAlignment="Center">
      <TextBlock Text="שם השדה החדש:" 
                 VerticalAlignment="Center" 
                 Width="120"/>
      <TextBox x:Name="TargetFieldTextBox"
               Text="total"
               Width="200" Height="28"
               VerticalContentAlignment="Center"/>
    </StackPanel>

    <!-- מידע -->
    <TextBlock Grid.Row="4"
               x:Name="StatusText"
               Text="בחר לפחות 2 שדות כדי להמשיך"
               Foreground="#E74C3C" FontSize="11"
               Margin="0,10,0,0"/>

    <!-- כפתורים -->
    <StackPanel Grid.Row="5" 
                Orientation="Horizontal" 
                HorizontalAlignment="Center"
                Margin="0,20,0,0">
      <Button x:Name="OkButton"
              Content="✓ הוסף פעולה"
              Width="140"
              Style="{StaticResource ModernButton}"
              Click="OkButton_Click"
              IsEnabled="False"
              Margin="0,0,15,0"/>
      <Button x:Name="CancelButton"
              Content="✗ ביטול"
              Width="100"
              Style="{StaticResource CancelButton}"
              Click="CancelButton_Click"/>
    </StackPanel>
  </Grid>
</Window>